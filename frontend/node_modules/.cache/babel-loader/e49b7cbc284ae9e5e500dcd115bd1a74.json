{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amira\\\\Desktop\\\\codiPlatform\\\\app\\\\frontend\\\\src\\\\Components\\\\Navbar\\\\Header.js\",\n    _s = $RefreshSig$();\n\n// Ã¯mport package react\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\nimport { toast } from 'react-toast';\nimport { AUTH } from '../../JS/actionsTypes/actionAuth';\nimport { useSelector } from 'react-redux';\nimport { dispatchLogin, dispatchGetUser } from '../../JS/actions/actionAuth'; // import google & github login \n\nimport { GoogleLogin } from 'react-google-login';\nimport LoginGithub from 'react-login-github'; // import axios\n\nimport axios from 'axios';\nimport { authenticate, isAuth } from '../../helpers/auth';\nimport { LOGOUT } from '../../JS/actionsTypes/actionAuth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Header() {\n  _s();\n\n  const auth = useSelector(state => state.auth);\n  const [user, setUser] = useState({}); //const {user, isLogged} = auth\n  //console.log(user)\n\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const history = useHistory();\n\n  const handleLogout = async () => {\n    try {\n      await axios.get('/user/logout');\n      localStorage.removeItem('firstLogin');\n      window.location.href = \"/\";\n    } catch (err) {\n      window.location.href = \"/\";\n    }\n  }; // handle Github\n\n\n  const githubSuccess = async response => {\n    try {\n      const {\n        client_secret,\n        code,\n        client_id\n      } = response;\n      const res = await axios.post(`http://localhost:7000/api/githublogin`, {\n        client_secret,\n        code,\n        client_id\n      }); //sendGithubToken(response.client_secret, response.code, response.client_id)\n\n      console.log(res);\n      const result = res;\n      console.log(result);\n      const token = response === null || response === void 0 ? void 0 : response.token; //dispatch({ type: AUTH, data: { result, token } })\n      //setUser(result);\n      //dispatch(dispatchLogin())\n\n      dispatch(dispatchGetUser(res));\n      dispatch({\n        type: AUTH,\n        data: {\n          result,\n          token\n        }\n      });\n      setUser({ ...user,\n        error: '',\n        success: res.data.msg\n      });\n      console.log(user);\n      history.push('/project');\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const githubFailure = response => alert('Github Sign In was unsuccessful. Try again later');\n\n  const userLink = () => {\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"drop-nav\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"#\",\n        className: \"avatar\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.avatar,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), \" \", user.name, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-angle-down\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 57\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"dropdown\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/profile\",\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            onClick: handleLogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 16\n    }, this);\n  };\n\n  const transForm = {\n    transform: isLogged ? \"translateY(-5px)\" : 0\n  };\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"DevAT\\u272EShop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: transForm,\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-shopping-cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 34\n          }, this), \" Cart\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), isLogged ? userLink() : /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/project\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-user\",\n            children: /*#__PURE__*/_jsxDEV(LoginGithub, {\n              clientId: `e8db77544d2e4e9ab741`,\n              buttonText: \"Login with Github\",\n              onSuccess: githubSuccess,\n              onFailure: githubFailure\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Header, \"VsFRhQP5gzUMId0EDBSvjuh6SNY=\", false, function () {\n  return [useSelector, useDispatch, useLocation, useHistory];\n});\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["C:/Users/Amira/Desktop/codiPlatform/app/frontend/src/Components/Navbar/Header.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","useDispatch","decode","toast","AUTH","useSelector","dispatchLogin","dispatchGetUser","GoogleLogin","LoginGithub","axios","authenticate","isAuth","LOGOUT","Header","auth","state","user","setUser","dispatch","location","history","handleLogout","get","localStorage","removeItem","window","href","err","githubSuccess","response","client_secret","code","client_id","res","post","console","log","result","token","type","data","error","success","msg","push","githubFailure","alert","userLink","avatar","name","transForm","transform","isLogged"],"mappings":";;;AACA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAgBC,UAAhB,EAA4BC,WAA5B,QAA+C,kBAA/C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SAASC,KAAT,QAAsB,aAAtB;AACA,SAASC,IAAT,QAAqB,kCAArB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AAIA,SAAQC,aAAR,EAAuBC,eAAvB,QAA6C,6BAA7C,C,CAGA;;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAOC,WAAP,MAAwB,oBAAxB,C,CAGA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,YAAT,EAAuBC,MAAvB,QAAqC,oBAArC;AACA,SAAQC,MAAR,QAAqB,kCAArB;;;AAGA,SAASC,MAAT,GAAkB;AAAA;;AACd,QAAMC,IAAI,GAAGV,WAAW,CAACW,KAAK,IAAIA,KAAK,CAACD,IAAhB,CAAxB;AACA,QAAM,CAACE,IAAD,EAAOC,OAAP,IAAkBtB,QAAQ,CAAC,EAAD,CAAhC,CAFc,CAKd;AACF;;AACA,QAAMuB,QAAQ,GAAGlB,WAAW,EAA5B;AACA,QAAMmB,QAAQ,GAAGpB,WAAW,EAA5B;AACA,QAAMqB,OAAO,GAAGtB,UAAU,EAA1B;;AAEE,QAAMuB,YAAY,GAAG,YAAY;AAC7B,QAAI;AACA,YAAMZ,KAAK,CAACa,GAAN,CAAU,cAAV,CAAN;AACAC,MAAAA,YAAY,CAACC,UAAb,CAAwB,YAAxB;AACAC,MAAAA,MAAM,CAACN,QAAP,CAAgBO,IAAhB,GAAuB,GAAvB;AACH,KAJD,CAIE,OAAOC,GAAP,EAAY;AACVF,MAAAA,MAAM,CAACN,QAAP,CAAgBO,IAAhB,GAAuB,GAAvB;AACH;AACJ,GARD,CAXc,CAoBlB;;;AACA,QAAME,aAAa,GAAG,MAAMC,QAAN,IAAmB;AACrC,QAAG;AACC,YAAM;AAAEC,QAAAA,aAAF;AAAiBC,QAAAA,IAAjB;AAAuBC,QAAAA;AAAvB,UAAoCH,QAA1C;AACA,YAAMI,GAAG,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAY,uCAAZ,EAClB;AAACJ,QAAAA,aAAD;AAAgBC,QAAAA,IAAhB;AAAsBC,QAAAA;AAAtB,OADkB,CAAlB,CAFD,CAID;;AACNG,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACM,YAAMI,MAAM,GAAGJ,GAAf;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYC,MAAZ;AAGA,YAAMC,KAAK,GAAGT,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAES,KAAxB,CAVC,CAcD;AACA;AACA;;AACApB,MAAAA,QAAQ,CAACZ,eAAe,CAAC2B,GAAD,CAAhB,CAAR;AAEAf,MAAAA,QAAQ,CAAC;AAAEqB,QAAAA,IAAI,EAAEpC,IAAR;AAAcqC,QAAAA,IAAI,EAAE;AAAEH,UAAAA,MAAF;AAAUC,UAAAA;AAAV;AAApB,OAAD,CAAR;AAEArB,MAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUyB,QAAAA,KAAK,EAAC,EAAhB;AAAoBC,QAAAA,OAAO,EAAET,GAAG,CAACO,IAAJ,CAASG;AAAtC,OAAD,CAAP;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAYpB,IAAZ;AAGAI,MAAAA,OAAO,CAACwB,IAAR,CAAa,UAAb;AAED,KA3BD,CA4BA,OAAOjB,GAAP,EAAY;AACVA,MAAAA,GAAG,CAACE,QAAJ,CAAaW,IAAb,CAAkBG,GAAlB,IACA1B,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUW,QAAAA,GAAG,EAAEA,GAAG,CAACE,QAAJ,CAAaW,IAAb,CAAkBG,GAAjC;AAAsCD,QAAAA,OAAO,EAAE;AAA/C,OAAD,CADP;AAEH;AACA,GAjCH;;AAkCE,QAAMG,aAAa,GAAGhB,QAAQ,IAC9BiB,KAAK,CAAC,kDAAD,CADL;;AAGE,QAAMC,QAAQ,GAAG,MAAM;AACnB,wBAAO;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA,8BACH,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,GAAT;AAAa,QAAA,SAAS,EAAC,QAAvB;AAAA,gCACA;AAAK,UAAA,GAAG,EAAE/B,IAAI,CAACgC,MAAf;AAAuB,UAAA,GAAG,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,gBADA,OACiChC,IAAI,CAACiC,IADtC,oBAC4C;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAD5C;AAAA;AAAA;AAAA;AAAA;AAAA,cADG,eAIH;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA,gCACI;AAAA,iCAAI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,UAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAA,iCAAI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,GAAT;AAAa,YAAA,OAAO,EAAE5B,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJG;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AASH,GAVD;;AAYA,QAAM6B,SAAS,GAAG;AACdC,IAAAA,SAAS,EAAEC,QAAQ,GAAG,kBAAH,GAAwB;AAD7B,GAAlB;AAIA,sBACI;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,6BACI;AAAA,+BAAI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAKI;AAAI,MAAA,KAAK,EAAEF,SAAX;AAAA,8BACI;AAAA,+BAAI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,GAAT;AAAA,kCAAa;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,cADJ,EAGQE,QAAQ,GACNL,QAAQ,EADF,gBAEP;AAAA,+BACD,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,UAAT;AAAA,iCAAoB;AAAG,YAAA,SAAS,EAAC,aAAb;AAAA,mCACpB,QAAC,WAAD;AACF,cAAA,QAAQ,EAAG,sBADT;AAEF,cAAA,UAAU,EAAC,mBAFT;AAGF,cAAA,SAAS,EAAEnB,aAHT;AAIF,cAAA,SAAS,EAAEiB;AAJT;AAAA;AAAA;AAAA;AAAA;AADoB;AAAA;AAAA;AAAA;AAAA;AAApB;AAAA;AAAA;AAAA;AAAA;AADC;AAAA;AAAA;AAAA;AAAA,cALT;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA2BH;;GArGQhC,M;UACQT,W,EAMEJ,W,EACAD,W,EACDD,U;;;KATTe,M;AAuGT,eAAeA,MAAf","sourcesContent":["\r\n// Ã¯mport package react\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link , useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport decode from 'jwt-decode';\r\nimport { toast } from 'react-toast'\r\nimport { AUTH } from '../../JS/actionsTypes/actionAuth';\r\nimport {useSelector} from 'react-redux'\r\n\r\n\r\n\r\nimport {dispatchLogin, dispatchGetUser} from '../../JS/actions/actionAuth'\r\n\r\n\r\n// import google & github login \r\nimport { GoogleLogin } from 'react-google-login';\r\nimport LoginGithub from 'react-login-github';\r\n\r\n\r\n// import axios\r\nimport axios from 'axios';\r\n\r\nimport { authenticate, isAuth } from '../../helpers/auth';\r\nimport {LOGOUT} from '../../JS/actionsTypes/actionAuth';\r\n\r\n\r\nfunction Header() {\r\n    const auth = useSelector(state => state.auth)\r\n    const [user, setUser] = useState({});\r\n\r\n\r\n    //const {user, isLogged} = auth\r\n  //console.log(user)\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await axios.get('/user/logout')\r\n            localStorage.removeItem('firstLogin')\r\n            window.location.href = \"/\";\r\n        } catch (err) {\r\n            window.location.href = \"/\";\r\n        }\r\n    }\r\n// handle Github\r\nconst githubSuccess = async(response) => {\r\n    try{\r\n        const { client_secret, code, client_id} = response\r\n        const res = await axios.post(`http://localhost:7000/api/githublogin`, \r\n        {client_secret, code, client_id})\r\n      //sendGithubToken(response.client_secret, response.code, response.client_id)\r\nconsole.log(res)\r\n      const result = res;\r\n      console.log(result)\r\n\r\n\r\n      const token = response?.token;\r\n\r\n\r\n\r\n      //dispatch({ type: AUTH, data: { result, token } })\r\n      //setUser(result);\r\n      //dispatch(dispatchLogin())\r\n      dispatch(dispatchGetUser(res))\r\n    \r\n      dispatch({ type: AUTH, data: { result, token } })\r\n\r\n      setUser({...user, error:'', success: res.data.msg})\r\n      console.log(user)\r\n\r\n\r\n      history.push('/project')\r\n    \r\n    }\r\n    catch (err) {\r\n      err.response.data.msg && \r\n      setUser({...user, err: err.response.data.msg, success: ''})\r\n  }\r\n  }\r\n  const githubFailure = response =>\r\n  alert('Github Sign In was unsuccessful. Try again later');\r\n  \r\n    const userLink = () => {\r\n        return <li className=\"drop-nav\">\r\n            <Link to=\"#\" className=\"avatar\">\r\n            <img src={user.avatar} alt=\"\"/> {user.name} <i className=\"fas fa-angle-down\"></i>\r\n            </Link>\r\n            <ul className=\"dropdown\">\r\n                <li><Link to=\"/profile\">Profile</Link></li>\r\n                <li><Link to=\"/\" onClick={handleLogout}>Logout</Link></li>\r\n            </ul>\r\n        </li>\r\n    }\r\n\r\n    const transForm = {\r\n        transform: isLogged ? \"translateY(-5px)\" : 0\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <div className=\"logo\">\r\n                <h1><Link to=\"/\">DevATâ®Shop</Link></h1>\r\n            </div>\r\n\r\n            <ul style={transForm}>\r\n                <li><Link to=\"/\"><i className=\"fas fa-shopping-cart\"></i> Cart</Link></li>\r\n                {\r\n                    isLogged\r\n                    ? userLink()\r\n                    :<li>\r\n                    <Link to=\"/project\"><i className=\"fas fa-user\"> \r\n                    <LoginGithub\r\n                  clientId={`e8db77544d2e4e9ab741`}\r\n                  buttonText=\"Login with Github\"\r\n                  onSuccess={githubSuccess}\r\n                  onFailure={githubFailure}\r\n                \r\n             ></LoginGithub></i> \r\n                    </Link>\r\n                    </li>\r\n                }\r\n                \r\n            </ul>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header"]},"metadata":{},"sourceType":"module"}